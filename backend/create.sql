create table activity_type (id int4 generated by default as identity, name varchar(255) not null, primary key (id));
create table condominium (id int4 generated by default as identity, description varchar(255) not null, name varchar(255) not null, number_apartments int4 not null, fk_localization_condominium_id int4, fk_status_id int4, primary key (id));
create table contract (id int4 generated by default as identity, apartment_number int4 not null, contract_date timestamp not null, contract_expiration_date timestamp not null, contract_value float8 not null, monthly_due_date int4 not null, monthly_payment_date int4 not null, fk_condominium_id int4, fk_contract_id int4, fk_status_id int4, primary key (id));
create table debt (id int4 generated by default as identity, due_date timestamp not null, value float8 not null, fk_lessee_id int4, fk_status_id int4, primary key (id));
create table employee (id int4 generated by default as identity, birth_date varchar(255) not null, cpf varchar(255) not null, email varchar(255) not null, hiring_date varchar(255) not null, name varchar(255) not null, password varchar(255) not null, rg varchar(255) not null, fk_role_id int4, fk_status_id int4, primary key (id));
create table item (id int4 generated by default as identity, description varchar(255), quantity int4 not null, value float8 not null, fk_repair_request int4, primary key (id));
create table lessee (id int4 generated by default as identity, birth_date varchar(255) not null, contact_number varchar(255) not null, cpf varchar(255) not null, email varchar(255) not null, name varchar(255) not null, password varchar(255) not null, rg varchar(255) not null, fk_status_id int4, primary key (id));
create table localization (zip_code int4 not null, name varchar(255) not null, road varchar(255) not null, primary key (zip_code));
create table localization_condominium (id int4 generated by default as identity, number varchar(255) not null, fk_localization_zipcode int4, primary key (id));
create table log_change_password (id int4 generated by default as identity, code varchar(255) not null, date timestamp not null, number_of_attempts int2 not null, fk_employee_id int4, fk_lessee_id int4, fk_status_id int4 not null, primary key (id));
create table movement (id int4 generated by default as identity, due_date timestamp not null, move_date_and_time timestamp not null, previous_value float8 not null, fk_activity_type_id int4, fk_debt_id int4, fk_employee_id int4 not null, primary key (id));
create table order_service (id int4 generated by default as identity, completion_date timestamp, generation_date timestamp not null, reserved_date timestamp not null, fk_status_id int4, primary key (id));
create table order_service_employee (order_service_id int4 not null, employee_id int4 not null, primary key (order_service_id, employee_id));
create table repair_request (id int4 generated by default as identity, apartment_number varchar(255) not null, date timestamp not null, problem_description varchar(255) not null, fk_condominium_id int4, fk_lessee_id int4, fk_order_service int4, fk_status_id int4, fk_type_problem_id int4, primary key (id));
create table role (id int4 generated by default as identity, name varchar(255) not null, primary key (id));
create table status (id int4 generated by default as identity, name varchar(255) not null, primary key (id));
create table type_problem (id int4 generated by default as identity, name varchar(255) not null, primary key (id));
alter table if exists employee add constraint UK_bvdrevla6o4w5s64n5qoaxsls unique (cpf);
alter table if exists employee add constraint UK_fopic1oh5oln2khj8eat6ino0 unique (email);
alter table if exists lessee add constraint UK_5iyafhrnp0kkk14mxokujg830 unique (cpf);
alter table if exists lessee add constraint UK_cr9062gpjj9yjtcyot01irhi0 unique (email);
alter table if exists condominium add constraint FKce35l65v6eoob7jdllmcdws2c foreign key (fk_localization_condominium_id) references localization_condominium;
alter table if exists condominium add constraint FKrndfogw3ixgdo4j9nm9ryjv4b foreign key (fk_status_id) references status;
alter table if exists contract add constraint FKdjrsj198n9sdfmyx5iwkpxs0y foreign key (fk_condominium_id) references condominium;
alter table if exists contract add constraint FKs9ef8jh7dkw7i07vksmgxw0rr foreign key (fk_contract_id) references lessee;
alter table if exists contract add constraint FK9ye32i02d5jg8hsedcdiy9owx foreign key (fk_status_id) references status;
alter table if exists debt add constraint FK5bw9vlyb7t14lj1t0wfl9a7jm foreign key (fk_lessee_id) references lessee;
alter table if exists debt add constraint FKmx10d4t1b21pnq8ha3jie49ad foreign key (fk_status_id) references status;
alter table if exists employee add constraint FKjaj6t8741wv1en06jt9hk753m foreign key (fk_role_id) references role;
alter table if exists employee add constraint FK3sfy1fl5j64i5qus61m48sf59 foreign key (fk_status_id) references status;
alter table if exists item add constraint FKhctoxsktikep5nx33u892s7rs foreign key (fk_repair_request) references repair_request;
alter table if exists lessee add constraint FK1n0rwx8dovbcwiqy5qhbtk7dn foreign key (fk_status_id) references status;
alter table if exists localization_condominium add constraint FKfxy2eatrmavjo5p2meiv2g902 foreign key (fk_localization_zipcode) references localization;
alter table if exists log_change_password add constraint FKd2vrb31p60ybvc4lgp8nh6lwf foreign key (fk_employee_id) references employee;
alter table if exists log_change_password add constraint FK60qcdu0x7mibsmm0k5dmn10ao foreign key (fk_lessee_id) references lessee;
alter table if exists log_change_password add constraint FKllh0d64ou6mby5105ugyhfdiv foreign key (fk_status_id) references status;
alter table if exists movement add constraint FK2gswf3mqpstujpi7pm10k3i8c foreign key (fk_activity_type_id) references activity_type;
alter table if exists movement add constraint FKjv3wdixtwfxr96fcchjemi56k foreign key (fk_debt_id) references debt;
alter table if exists movement add constraint FKk6q16aow1thiernvf326p1odm foreign key (fk_employee_id) references employee;
alter table if exists order_service add constraint FKasoar16c6j486nita7sqrtx0j foreign key (fk_status_id) references status;
alter table if exists order_service_employee add constraint FK1ttiwd13my199tqmjsw97i61c foreign key (employee_id) references employee;
alter table if exists order_service_employee add constraint FKpv72lh6vxij88woriqck3nwm3 foreign key (order_service_id) references order_service;
alter table if exists repair_request add constraint FKe8m2x4sv4w361i8agkfbvir42 foreign key (fk_condominium_id) references condominium;
alter table if exists repair_request add constraint FKtghpn3uy5u7j3qow54usk9vcs foreign key (fk_lessee_id) references lessee;
alter table if exists repair_request add constraint FKdc3v18gc4firsrj1tsp3yir0u foreign key (fk_order_service) references order_service;
alter table if exists repair_request add constraint FKi4gfukoqumludrqha6cvuxmoi foreign key (fk_status_id) references status;
alter table if exists repair_request add constraint FKe2yabikei22xs4tioyrm9slid foreign key (fk_type_problem_id) references type_problem;
create table activity_type (id int4 generated by default as identity, name varchar(255) not null, primary key (id));
create table condominium (id int4 generated by default as identity, description varchar(255) not null, name varchar(255) not null, number_apartments int4 not null, fk_localization_condominium_id int4, fk_status_id int4, primary key (id));
create table contract (id int4 generated by default as identity, apartment_number int4 not null, contract_date timestamp not null, contract_expiration_date timestamp not null, contract_value float8 not null, monthly_due_date int4 not null, monthly_payment_date int4 not null, fk_condominium_id int4, fk_contract_id int4, fk_status_id int4, primary key (id));
create table debt (id int4 generated by default as identity, due_date timestamp not null, value float8 not null, fk_lessee_id int4, fk_status_id int4, primary key (id));
create table employee (id int4 generated by default as identity, birth_date varchar(255) not null, cpf varchar(255) not null, email varchar(255) not null, hiring_date varchar(255) not null, name varchar(255) not null, password varchar(255) not null, rg varchar(255) not null, fk_role_id int4, fk_status_id int4, primary key (id));
create table item (id int4 generated by default as identity, description varchar(255), quantity int4 not null, value float8 not null, fk_repair_request int4, primary key (id));
create table lessee (id int4 generated by default as identity, birth_date varchar(255) not null, contact_number varchar(255) not null, cpf varchar(255) not null, email varchar(255) not null, name varchar(255) not null, password varchar(255) not null, rg varchar(255) not null, fk_status_id int4, primary key (id));
create table localization (zip_code int4 not null, name varchar(255) not null, road varchar(255) not null, primary key (zip_code));
create table localization_condominium (id int4 generated by default as identity, number varchar(255) not null, fk_localization_zipcode int4, primary key (id));
create table log_change_password (id int4 generated by default as identity, code varchar(255) not null, date timestamp not null, number_of_attempts int2 not null, fk_employee_id int4, fk_lessee_id int4, fk_status_id int4 not null, primary key (id));
create table movement (id int4 generated by default as identity, due_date timestamp not null, move_date_and_time timestamp not null, previous_value float8 not null, fk_activity_type_id int4, fk_debt_id int4, fk_employee_id int4 not null, primary key (id));
create table order_service (id int4 generated by default as identity, completion_date timestamp, generation_date timestamp not null, reserved_date timestamp not null, fk_status_id int4, primary key (id));
create table order_service_employee (order_service_id int4 not null, employee_id int4 not null, primary key (order_service_id, employee_id));
create table repair_request (id int4 generated by default as identity, apartment_number varchar(255) not null, date timestamp not null, problem_description varchar(255) not null, fk_condominium_id int4, fk_lessee_id int4, fk_order_service int4, fk_status_id int4, fk_type_problem_id int4, primary key (id));
create table role (id int4 generated by default as identity, name varchar(255) not null, primary key (id));
create table status (id int4 generated by default as identity, name varchar(255) not null, primary key (id));
create table type_problem (id int4 generated by default as identity, name varchar(255) not null, primary key (id));
alter table if exists employee add constraint UK_bvdrevla6o4w5s64n5qoaxsls unique (cpf);
alter table if exists employee add constraint UK_fopic1oh5oln2khj8eat6ino0 unique (email);
alter table if exists lessee add constraint UK_5iyafhrnp0kkk14mxokujg830 unique (cpf);
alter table if exists lessee add constraint UK_cr9062gpjj9yjtcyot01irhi0 unique (email);
alter table if exists condominium add constraint FKce35l65v6eoob7jdllmcdws2c foreign key (fk_localization_condominium_id) references localization_condominium;
alter table if exists condominium add constraint FKrndfogw3ixgdo4j9nm9ryjv4b foreign key (fk_status_id) references status;
alter table if exists contract add constraint FKdjrsj198n9sdfmyx5iwkpxs0y foreign key (fk_condominium_id) references condominium;
alter table if exists contract add constraint FKs9ef8jh7dkw7i07vksmgxw0rr foreign key (fk_contract_id) references lessee;
alter table if exists contract add constraint FK9ye32i02d5jg8hsedcdiy9owx foreign key (fk_status_id) references status;
alter table if exists debt add constraint FK5bw9vlyb7t14lj1t0wfl9a7jm foreign key (fk_lessee_id) references lessee;
alter table if exists debt add constraint FKmx10d4t1b21pnq8ha3jie49ad foreign key (fk_status_id) references status;
alter table if exists employee add constraint FKjaj6t8741wv1en06jt9hk753m foreign key (fk_role_id) references role;
alter table if exists employee add constraint FK3sfy1fl5j64i5qus61m48sf59 foreign key (fk_status_id) references status;
alter table if exists item add constraint FKhctoxsktikep5nx33u892s7rs foreign key (fk_repair_request) references repair_request;
alter table if exists lessee add constraint FK1n0rwx8dovbcwiqy5qhbtk7dn foreign key (fk_status_id) references status;
alter table if exists localization_condominium add constraint FKfxy2eatrmavjo5p2meiv2g902 foreign key (fk_localization_zipcode) references localization;
alter table if exists log_change_password add constraint FKd2vrb31p60ybvc4lgp8nh6lwf foreign key (fk_employee_id) references employee;
alter table if exists log_change_password add constraint FK60qcdu0x7mibsmm0k5dmn10ao foreign key (fk_lessee_id) references lessee;
alter table if exists log_change_password add constraint FKllh0d64ou6mby5105ugyhfdiv foreign key (fk_status_id) references status;
alter table if exists movement add constraint FK2gswf3mqpstujpi7pm10k3i8c foreign key (fk_activity_type_id) references activity_type;
alter table if exists movement add constraint FKjv3wdixtwfxr96fcchjemi56k foreign key (fk_debt_id) references debt;
alter table if exists movement add constraint FKk6q16aow1thiernvf326p1odm foreign key (fk_employee_id) references employee;
alter table if exists order_service add constraint FKasoar16c6j486nita7sqrtx0j foreign key (fk_status_id) references status;
alter table if exists order_service_employee add constraint FK1ttiwd13my199tqmjsw97i61c foreign key (employee_id) references employee;
alter table if exists order_service_employee add constraint FKpv72lh6vxij88woriqck3nwm3 foreign key (order_service_id) references order_service;
alter table if exists repair_request add constraint FKe8m2x4sv4w361i8agkfbvir42 foreign key (fk_condominium_id) references condominium;
alter table if exists repair_request add constraint FKtghpn3uy5u7j3qow54usk9vcs foreign key (fk_lessee_id) references lessee;
alter table if exists repair_request add constraint FKdc3v18gc4firsrj1tsp3yir0u foreign key (fk_order_service) references order_service;
alter table if exists repair_request add constraint FKi4gfukoqumludrqha6cvuxmoi foreign key (fk_status_id) references status;
alter table if exists repair_request add constraint FKe2yabikei22xs4tioyrm9slid foreign key (fk_type_problem_id) references type_problem;
